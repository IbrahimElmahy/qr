# نظام تتبع الشحنات 📦

نظام متكامل لتسجيل شحنات عبر تطبيق Android مع حفظها في قاعدة بيانات MySQL وعرض الإحصائيات في موقع PHP.

## 🎯 المميزات

### 📱 تطبيق Android
- **مسح الباركود**: مسح باركود الشحنات باستخدام الكاميرا
- **إدارة الشركات**: إضافة وتفعيل/تعطيل شركات الشحن
- **الإحصائيات**: عرض إحصائيات يومية مفصلة
- **المزامنة**: مزامنة البيانات مع السيرفر تلقائياً
- **العمل بدون إنترنت**: حفظ البيانات محلياً ومزامنتها لاحقاً

### 🌐 الموقع الإداري
- **لوحة التحكم**: عرض الإحصائيات والتقارير
- **استعراض الشحنات**: بحث وفلترة الشحنات
- **تسجيل الدخول**: نظام مصادقة آمن
- **واجهة عربية**: تصميم متجاوب باللغة العربية

## 🛠️ التقنيات المستخدمة

### تطبيق Android
- **Kotlin** - لغة البرمجة
- **Room Database** - قاعدة بيانات محلية
- **Retrofit** - للاتصال بالشبكة
- **ZXing** - لماسح الباركود
- **Navigation Component** - للتنقل
- **MVVM Architecture** - نمط التصميم

### الموقع الإداري
- **PHP** - لغة البرمجة
- **MySQL** - قاعدة البيانات
- **HTML/CSS/JavaScript** - الواجهة الأمامية
- **Bootstrap** - للتصميم المتجاوب

## 📋 متطلبات النظام

### للسيرفر
- PHP 7.4 أو أحدث
- MySQL 5.7 أو أحدث
- Apache/Nginx
- مساحة تخزين: 100MB على الأقل

### للتطبيق
- Android 7.0 (API 24) أو أحدث
- كاميرا للباركود
- اتصال بالإنترنت (اختياري)

## 🚀 التثبيت والإعداد

### 1. إعداد قاعدة البيانات

```sql
-- تشغيل ملف database_setup.sql
mysql -u root -p < database_setup.sql
```

### 2. إعداد APIs

1. انسخ مجلد `api` إلى مجلد الويب الخاص بك
2. عدّل إعدادات قاعدة البيانات في `api/config.php`:

```php
define('DB_HOST', 'localhost');
define('DB_NAME', 'shipment_tracking');
define('DB_USER', 'your_username');
define('DB_PASS', 'your_password');
```

### 3. إعداد الموقع الإداري

1. انسخ مجلد `website` إلى مجلد الويب الخاص بك
2. تأكد من أن المسار صحيح في `website` للوصول إلى `api`

### 4. إعداد تطبيق Android

1. افتح المشروع في Android Studio
2. عدّل رابط السيرفر في `RetrofitInstance.kt`:

```kotlin
private const val BASE_URL = "http://your-server-ip/shipment_tracking/api/"
```

3. شغّل التطبيق على الجهاز أو المحاكي

## 📱 استخدام التطبيق

### 1. إدارة الشركات
- انتقل لتبويب "الشركات"
- أضف شركات جديدة
- فعّل/عطّل الشركات حسب الحاجة

### 2. مسح الباركود
- انتقل لتبويب "المسح"
- اختر شركة الشحن
- اضغط "ابدأ المسح"
- وجه الكاميرا نحو الباركود

### 3. عرض الإحصائيات
- انتقل لتبويب "الإحصائيات"
- اختر التاريخ والشركة
- اضغط "تحديث" لعرض البيانات

## 🌐 استخدام الموقع الإداري

### تسجيل الدخول
- الرابط: `http://your-server/website/login.php`
- اسم المستخدم: `admin`
- كلمة المرور: `1234`

### الصفحة الرئيسية
- عرض الإحصائيات اليومية
- فلترة حسب التاريخ والشركة
- تفاصيل الشحنات مع عدد التكرار

### استعراض الشحنات
- بحث متقدم بالباركود
- فلترة حسب الشركة والتاريخ
- ترقيم الصفحات للنتائج الكبيرة

## 🔧 APIs المتاحة

### إدارة الشركات
- `GET getCompanies.php` - جلب قائمة الشركات
- `POST addCompany.php` - إضافة شركة جديدة
- `POST toggleCompany.php` - تفعيل/تعطيل شركة

### إدارة الشحنات
- `POST addShipment.php` - إضافة شحنة جديدة
- `GET getShipments.php` - جلب قائمة الشحنات
- `GET getStats.php` - جلب الإحصائيات

## 🔒 الأمان

- **مصادقة أساسية**: Basic Authentication للـ APIs
- **تشفير البيانات**: استخدام HTTPS في الإنتاج
- **فلترة المدخلات**: تنظيف جميع البيانات المدخلة
- **جلسات آمنة**: إدارة جلسات المستخدمين

## 📊 هيكل قاعدة البيانات

### جدول الشركات (companies)
```sql
- id (INT, PRIMARY KEY)
- name (VARCHAR)
- is_active (BOOLEAN)
- created_at (TIMESTAMP)
```

### جدول الشحنات (shipments)
```sql
- id (INT, PRIMARY KEY)
- barcode (VARCHAR)
- company_id (INT, FOREIGN KEY)
- scan_date (DATE)
- created_at (TIMESTAMP)
```

## 🐛 استكشاف الأخطاء

### مشاكل الاتصال
1. تأكد من صحة رابط السيرفر في التطبيق
2. تحقق من إعدادات قاعدة البيانات
3. تأكد من تشغيل خادم الويب

### مشاكل المسح
1. تأكد من إعطاء صلاحية الكاميرا للتطبيق
2. تحقق من جودة الباركود
3. تأكد من إضاءة كافية

### مشاكل الموقع
1. تحقق من مسارات الملفات
2. تأكد من صلاحيات المجلدات
3. راجع سجلات الأخطاء في PHP

## 📞 الدعم

للحصول على المساعدة أو الإبلاغ عن مشاكل:
- راجع ملف README هذا
- تحقق من سجلات الأخطاء
- تأكد من إعدادات النظام

## 📄 الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام الشخصي والتجاري.

---

**تم تطوير هذا النظام بواسطة فريق التطوير** 🚀
